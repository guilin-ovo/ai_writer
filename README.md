# AI 辅助写作工具

一个功能完整的 AI 辅助小说创作工具，帮助你系统化地创作小说。

## 功能特性

### 📊 项目管理
- 创建和管理多个小说项目
- 项目信息编辑和删除
- 项目间快速切换

### 👤 人物管理
- 创建、编辑、删除人物
- 详细的人物信息（姓名、别名、性别、年龄、外貌、性格、背景、技能、关系）
- **AI 辅助生成人物**
- 支持添加标签

### 🏛️ 组织/势力管理
- 创建、编辑、删除组织
- 组织信息（名称、类型、首领、成员、描述、历史、地点）
- **AI 辅助生成组织**

### 🌍 世界观设定
- 分类管理世界观设定
- 支持自定义分类
- **AI 辅助生成世界观**

### 📋 大纲管理
- 主大纲和卷纲管理
- **AI 辅助生成大纲**

### 📚 卷和章节管理
- 卷的创建和编辑
- **AI 生成卷纲**
- 章节管理
- **AI 生成章节（标题和简介）**
- 自动解析 AI 生成的章节并添加

### ✍️ 写作功能
- 章节编辑器
- 实时字数统计
- **AI 生成章节内容**
- 支持流式显示生成过程
- 自动保存到本地存储

### 📈 统计功能
- 总字数统计
- 人物、组织、设定数量
- 章节完成率
- 各卷进度条
- 详细的写作统计

### 🔧 API 配置
- 支持多个 API 配置
- 可设置默认配置
- 支持自定义 Base URL 和模型
- 兼容 OpenAI 格式的 API

### 💾 数据持久化
- **本地文件存储**：数据保存在项目根目录的 `storage/local.json.gz` 文件中（gzip 压缩格式）
- **跨环境支持**：支持浏览器、Node.js 和 Electron 环境
- **数据压缩**：使用 gzip 压缩，减小文件大小

### 🖥️ Electron 支持
- 支持桌面应用运行
- 离线使用，数据本地存储
- 更好的系统集成

## 使用流程

1. **配置 API**
   - 进入"API 设置"页面
   - 添加你的 AI API 配置（如 OpenAI、DeepSeek 等）
   - 设置为默认配置

2. **创建项目**
   - 点击"新建项目"
   - 填写小说名称、类型、简介

3. **设定世界观**
   - 进入"世界观"页面
   - 可以手动添加或让 AI 生成设定

4. **创建人物**
   - 进入"人物"页面
   - 添加主要人物
   - 可以用 AI 帮你生成

5. **添加组织（可选）**
   - 进入"组织"页面
   - 添加小说中的势力/宗门

6. **写大纲**
   - 进入"大纲"页面
   - 可以手动写或让 AI 生成完整大纲

7. **创建卷和章节**
   - 进入"卷/章节"页面
   - 创建卷，添加卷纲
   - 为每卷添加章节，可以用 AI 批量生成章节标题和简介

8. **开始写作**
   - 进入"写作"页面
   - 选择章节开始写作
   - 可以用 AI 生成章节内容

## 安装和运行

### 1. 安装依赖
```bash
npm install
```

### 2. 启动开发服务器（浏览器模式）
```bash
npm run dev
```

### 3. 启动 Electron 应用（桌面模式）
```bash
npm run electron:dev
```

### 4. 构建生产版本
```bash
npm run build
```

### 5. 构建 Electron 应用
```bash
npm run electron:build
```

## 技术栈

- React 18
- TypeScript
- Vite
- Electron
- 纯 CSS（无额外 UI 库）
- **本地文件存储**（gzip 压缩）
- **跨环境支持**（浏览器、Node.js、Electron）

## 注意事项

- 数据保存在项目根目录的 `storage/local.json.gz` 文件中
- **storage 文件夹会被上传到 Git**，但其中的文件（包括 `local.json.gz`）不会被上传
- 建议定期备份 `local.json.gz` 文件到其他位置
- 需要有效的 API Key 才能使用 AI 功能
- 支持任何兼容 OpenAI API 格式的服务
- Electron 应用提供更好的离线使用体验

## 存储说明

- **存储位置**：`storage/local.json.gz`
- **存储格式**：gzip 压缩的 JSON 文件
- **文件大小**：压缩后通常比原始 JSON 小 70-90%
- **跨环境**：在浏览器、Node.js 和 Electron 环境中都能使用
- **自动保存**：所有操作都会自动保存到本地文件

## 常见问题

### 项目在重新打开后消失？
- 确保使用 `npm run electron:dev` 启动应用
- 检查 `storage` 文件夹是否存在
- 检查 `storage/local.json.gz` 文件是否被创建

### 存储文件过大？
- 存储文件使用 gzip 压缩，已经大幅减小体积
- 如仍有问题，可以手动清理不需要的项目数据

### 如何备份数据？
- 复制 `storage/local.json.gz` 文件到安全位置
- 需要恢复时，将备份文件复制回 `storage` 文件夹